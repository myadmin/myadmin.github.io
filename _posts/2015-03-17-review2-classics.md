---
layout: post
title: 阅读《css3权威指南(第三版)》第三章
category: read
---

<h2>结构和层叠</h2>

继承是从一个元素向其后代元素传递属性值所采用的机制。确定应当向一个元素应用哪些值时，用户代理不仅要考虑继承，还要考虑声明的特殊性，另外需要考虑声明本身的来源。这个过程就称为 `层叠`。

<h4>特殊性</h4>
选择器的特殊性由选择器本身的组件确定。特殊性值表述为4个部分，如：0，0，0，0。一个选择器的具体特殊性如下确定：
<ul>
	<li>对于选择器中给定的各个ID属性值，加0，1，0，0。</li>
	<li>对于选择器中给定的各个类属性值、属性选择或伪类，加0，0，1，0。</li>
	<li>对于选择器中给定的各个元素和伪元素，加0，0，0，1。</li>
	<li>结合符和通配选择器对特殊性没有任何贡献。</li>
</ul>
例如，以下规则中选择器的特殊性见注释：

{%highlight css%}
h1 {color: red;}  	/* specificity = 0,0,0,1 */
p em {color: purple;}  	/* specificity = 0,0,0,2 */
.grape {color: purple;}  	/* specificity = 0,0,1,0 */
*.bright {color: yellow;}  	/* specificity = 0,0,1,0 */ 
p.bright em.dark{color: maroon;}  	/* specificity = 0,0,2,2 */ 
#id216 {color: blue;}  	/* specificity = 0,1,0,0 */
div#sidebar *[href] {color: silver;}  	/* specificity = 0,1,1,1 */
{%endhighlight%}

<h4>重要性</h4>
有时某个声明可能非常重要，超过了所有其他声明。
CSS2.1称之为重要声明（原因显而易见），并允许在这些声明的结束分号之前插入!important来标志。[关于important](http://myadmin.github.io/demo/demo-css/important.html)。
<br />  
 `p.dark{color: #333 !important; background: white;}`

<h4>继承</h4>
特殊性对于理解如何向文档应用声明很重要，同样的，还有一个很重要的概念，即`继承`。基于继承机制，样式不仅应用到指定的元素，还会应用到它的后代元素。

<h4>层叠</h4>
"层叠样式表"这个名字可能会提供一点提示。CSS所基于的方法就是让样式层叠在一起，这是通过结合继承和特殊性做到的。CSS2.1的层叠规则相当简单：
<ol>
	<li>找出所有相关的规则，这些规则都包含与一个给定元素匹配的选择器。</li>
	<li>按显示权重对应用到该元素的所有声明排序。标志!important的规则的权重要高于没有!important标志的规则。</li>
	<li>按特殊性对应用到给定元素的所有声明排序。有较高特殊性的元素权重要大于有较低特殊性的元素。</li>
	<li>按出现顺序对应用到给定元素的所有声明排序。一个声明在样式表或者文档中越后出现，它的权重就越大。如果样式表中有导入的样式表，一般认为出现在导入样式表中的声明在前，主样式表中的所有声明在后。</li>
</ol>
总结一下，在声明权重方面要考虑5级。权重由大到小的顺序依次为：
<ol>
	<li>读者的重要声明</li>
	<li>创作人员的重要声明</li>
	<li>创作人员的正常声明</li>
	<li>读者的正常声明</li>
	<li>用户代理声明</li>
</ol>
创作人员通常只需要考虑前4个权重级别，因为任何声明都会胜过用户代理样式。

<h4>小结</h4>
层叠样式表中最基本的一个方面可能就是层叠了 -- 冲突的声明要通过这个层叠过程排序，并由此确定最终的文档表示。这个过程的核心是选择器及其相关声明的特殊性，以及继承机制。

	未完待续


{% highlight ruby %}
{% endhighlight %}

